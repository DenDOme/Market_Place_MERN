# Order Service

## Описание:

**OrderService** — это микросервис в архитектуре, предназначенный для обработки заказов пользователей, управления корзинами, создания и отслеживания статусов заказов. Он взаимодействует с другими сервисами через очереди сообщений (RabbitMQ) и использует базы данных MongoDB и Redis для хранения и кеширования данных о заказах и корзинах. Этот сервис отвечает за создание новых заказов, получение информации о существующих заказах, изменение их статусов и управление корзинами пользователей.

## Задача:

- **Обработка запросов на создание, изменение, получение и удаление заказов**.  
   Сервис должен принимать запросы на создание новых заказов, их изменение или удаление. Все изменения должны фиксироваться в базе данных, и пользователю возвращается актуальное состояние заказа.
- **Управление корзинами пользователей**.  
   Сервис обеспечивает добавление товаров в корзину, удаление товаров, а также очистку корзины при оформлении заказа. Все изменения в корзине синхронизируются с базой данных.
- **Поддержка связи с другими микросервисами через RabbitMQ для обновления данных о продуктах**.  
   Для синхронизации данных о товарах и актуализации информации о наличии или изменении цены товаров, OrderService использует RabbitMQ для обмена сообщениями с ProductService.
- **Обеспечение взаимодействия с базой данных для хранения информации о заказах и корзинах**.  
   Все данные о заказах и корзинах сохраняются в MongoDB, что позволяет эффективно обрабатывать запросы, связанные с этими сущностями.

## Чем он обязан:

- **Обработка запросов на создание заказа и сохранение его в базе данных**.  
   Каждый новый заказ сохраняется в MongoDB с указанием всех необходимых данных (товары, количество, пользователь, статус). При изменении статуса заказа или других данных, сервис обновляет запись в базе данных.
- **Управление корзинами пользователей**.  
   Сервис отвечает за добавление товаров в корзину, их удаление и общую очистку корзины при оформлении заказа. Для этого сервис использует функционал для работы с MongoDB, а также Redis для кеширования данных о продуктах, которые были получены через RabbitMQ, чтобы ускорить доступ к этим данным.
- **Поддержка статусов заказов**.  
   Статусы заказов, такие как "Pending" (ожидает обработки), "Processing" (в процессе), "Shipped" (отправлен), "Delivered" (доставлен) и "Cancelled" (отменен), поддерживаются и обновляются в базе данных в зависимости от изменений состояния заказа.
- **Обновление и удаление кэшированных данных о продуктах через RabbitMQ**.  
   В случае изменения информации о продукте (например, цены или наличия), OrderService обновляет кэшированные данные о продуктах через RabbitMQ, чтобы обеспечить актуальность информации.
- **Использование Redis для кеширования данных и улучшения производительности**.  
   Для ускорения работы с продуктами и повышения времени отклика запросов, сервис использует Redis для кеширования данных о продуктах. Это позволяет минимизировать обращения к базе данных и значительно улучшить производительность системы.
- **Обработка ошибок и выполнение транзакций с базой данных для обеспечения целостности данных**.  
   При выполнении операций с заказами или корзинами важно обеспечивать целостность данных. OrderService использует механизмы обработки ошибок и транзакций для предотвращения потери или повреждения данных при сбоях системы.

## Технологии:

- **Express.js**: для создания RESTful API и обработки запросов.
- **MongoDB**: для хранения данных о заказах и корзинах.
- **Mongoose**: для работы с MongoDB.
- **RabbitMQ**: для обмена сообщениями с другими микросервисами (например, для обновления кэшированных данных о продуктах).
- **Redis**: для кэширования данных и повышения производительности.
- **dotenv**: для конфигурации окружения и управления переменными среды.

## Заключение:

**OrderService** — является ключевым компонентом в архитектуре микросервисов, отвечающим за обработку заказов и управление корзинами пользователей. Он эффективно взаимодействует с другими сервисами через RabbitMQ, использует MongoDB для хранения данных и Redis для кеширования информации о продуктах, что значительно улучшает производительность системы. Благодаря поддержке различных статусов заказов и надежной обработке ошибок, сервис гарантирует целостность данных и высокую скорость отклика.
